import{i as e,c as A}from"./vendor.3439c2da.js";!function(e=".",A="__import__"){try{self[A]=new Function("u","return import(u)")}catch(t){const s=new URL(e,location),i=e=>{URL.revokeObjectURL(e.src),e.remove()};self[A]=e=>new Promise(((t,o)=>{const r=new URL(e,s);if(self[A].moduleMap[r])return t(self[A].moduleMap[r]);const n=new Blob([`import * as m from '${r}';`,`${A}.moduleMap['${r}']=m;`],{type:"text/javascript"}),a=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){o(new Error(`Failed to import: ${e}`)),i(a)},onload(){t(self[A].moduleMap[r]),i(a)}});document.head.appendChild(a)})),self[A].moduleMap={}}}("/assets/");class t{constructor(){this.et=new EventTarget,this.body=document.querySelector("body"),this.et.addEventListener("settingup",(e=>{e.detail?this.body.classList.add("settingup"):this.body.classList.remove("settingup")}))}start(){this.et.dispatchEvent(new CustomEvent("settingup",{detail:!0}))}stop(){this.et.dispatchEvent(new CustomEvent("settingup",{detail:!1}))}}class s{constructor(){this.et=new EventTarget,this.feed=document.querySelector("#feed"),this.typing=document.querySelector("#is-typing"),this.noBubbleMessage=document.querySelector("#no-bubble"),this.bubbles=localStorage.getItem("bubbles"),this.parsedBubbles=JSON.parse(this.bubbles)}async init(){await this.loadFeed(),this.scrollDown(),this.et.addEventListener("to-leon",(e=>{this.createBubble("me",e.detail)})),this.et.addEventListener("me-received",(e=>{this.createBubble("leon",e.detail)}))}sendTo(e,A){"leon"===e&&this.et.dispatchEvent(new CustomEvent("to-leon",{detail:A}))}receivedFrom(e,A){"leon"===e&&this.et.dispatchEvent(new CustomEvent("me-received",{detail:A}))}isTyping(e,A){"leon"===e&&(A?this.enableTyping():!1===A&&this.disableTyping())}enableTyping(){this.typing.classList.contains("on")||this.typing.classList.add("on")}disableTyping(){this.typing.classList.contains("on")&&this.typing.classList.remove("on")}scrollDown(){this.feed.scrollTo(0,this.feed.scrollHeight)}loadFeed(){return new Promise((e=>{if(null===this.parsedBubbles||0===this.parsedBubbles.length)this.noBubbleMessage.classList.remove("hide"),localStorage.setItem("bubbles",JSON.stringify([])),this.parsedBubbles=[],e();else for(let A=0;A<this.parsedBubbles.length;A+=1){const t=this.parsedBubbles[A];this.createBubble(t.who,t.string,!1),A+1===this.parsedBubbles.length&&setTimeout((()=>{e()}),100)}}))}createBubble(e,A,t=!0){const s=document.createElement("div"),i=document.createElement("p");s.className=`bubble-container ${e}`,i.className="bubble",i.innerHTML=A,this.feed.appendChild(s).appendChild(i),t&&this.saveBubble(e,A)}saveBubble(e,A){this.noBubbleMessage.classList.contains("hide")||this.noBubbleMessage.classList.add("hide"),62===this.parsedBubbles.length&&this.parsedBubbles.shift(),this.parsedBubbles.push({who:e,string:A}),localStorage.setItem("bubbles",JSON.stringify(this.parsedBubbles)),this.scrollDown()}}class i{constructor(A,t,i,o){this.client=A,this._input=i,this.serverUrl=t,this.socket=e(this.serverUrl),this.history=localStorage.getItem("history"),this.parsedHistory=[],this.info=o,this.chatbot=new s,this._recorder={}}set input(e){void 0!==e&&(this._input.value=e)}set recorder(e){this._recorder=e}get recorder(){return this._recorder}init(){this.chatbot.init(),this.socket.on("connect",(()=>{this.socket.emit("init",this.client)})),this.socket.on("answer",(e=>{this.chatbot.receivedFrom("leon",e)})),this.socket.on("is-typing",(e=>{this.chatbot.isTyping("leon",e)})),this.socket.on("recognized",((e,A)=>{this._input.value=e,this.send("query"),A("string-received")})),this.socket.on("audio-forwarded",((e,A)=>{const t=new AudioContext,s=t.createBufferSource();t.decodeAudioData(e.buffer,(A=>{s.buffer=A,s.connect(t.destination),s.start(0),this.info.after_speech&&e.is_final_answer&&setTimeout((()=>{this._recorder.start(),this._recorder.enabled=!0;const e=setInterval((()=>{this._recorder.enabled&&this._recorder.countSilenceAfterTalk<=8&&(8===this._recorder.countSilenceAfterTalk?(this._recorder.stop(),this._recorder.enabled=!1,this._recorder.countSilenceAfterTalk=0,clearInterval(e)):this._recorder.noiseDetected?clearInterval(e):this._recorder.countSilenceAfterTalk+=1)}),1e3)}),e.duration+500)})),A("audio-received")})),this.socket.on("download",(e=>{window.location=`${this.serverUrl}/v1/downloads?package=${e.package}&module=${e.module}`})),null!==this.history&&(this.parsedHistory=JSON.parse(this.history))}send(e){return""!==this._input.value&&(this.socket.emit(e,{client:this.client,value:this._input.value.trim()}),this.chatbot.sendTo("leon",this._input.value),this.save(),!0)}save(){let e=this._input.value;null===localStorage.getItem("history")?(localStorage.setItem("history",JSON.stringify([])),this.parsedHistory=JSON.parse(localStorage.getItem("history"))):this.parsedHistory.length>=32&&this.parsedHistory.shift()," "===e[0]&&(e=e.substr(1,e.length-1)),this.parsedHistory[this.parsedHistory.length-1]!==e&&(this.parsedHistory.push(e),localStorage.setItem("history",JSON.stringify(this.parsedHistory))),this._input.value=""}}class o{constructor(e,A,t){this.recorder=new MediaRecorder(e,{audioBitsPerSecond:16e3}),this.el=A,this.audioOn=new Audio("data:audio/mpeg;base64,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"),this.audioOff=new Audio("data:audio/mpeg;base64,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"),this.playSound=!0,this.info=t,this.enabled=!1,this.hotwordTriggered=!1,this.noiseDetected=!1,this.countSilenceAfterTalk=0}start(e=!0){!1===this.info.stt.enabled?console.warn("Speech-to-text disabled"):(this.playSound=e,this.recorder.start(e))}stop(e=!0){!1===this.info.stt.enabled?console.warn("Speech-to-text disabled"):(this.playSound=e,this.recorder.stop(e))}onstart(e){this.recorder.onstart=A=>{this.playSound&&this.audioOn.play(),this.el.classList.add("enabled"),e(A)}}onstop(e){this.recorder.onstop=A=>{this.playSound&&this.audioOff.play(),this.el.classList.remove("enabled"),e(A)}}ondataavailable(e){this.recorder.ondataavailable=A=>{e(A)}}}const r={listening:(e,A,t,s,i)=>{const o=new AudioContext,r=o.createAnalyser();o.createMediaStreamSource(e).connect(r),r.minDecibels=A;const n=new Uint8Array(r.frequencyBinCount);let a=performance.now(),l=!1;const d=e=>{requestAnimationFrame(d),r.getByteFrequencyData(n),n.some((e=>e))&&(l&&(l=!1,s()),a=e),!l&&e-a>t&&(i(),l=!0)};d()}};let n=-1,a=null;const l="webapp",d=-40,c=1e3;document.addEventListener("DOMContentLoaded",(()=>{const e=new t;e.start(),A.get("/v1/info").end(((A,t)=>{if(A||!t.ok)console.error(A.response.error.message);else{const A=document.querySelector("#query"),s=document.querySelector("button"),h=document.querySelector("#version small"),u=document.querySelector("#logger small"),g=new i(l,"",A,t.body);let p={},b=[],y=" enabled, thank you.";h.innerHTML+=g.info.version,!1===g.info.logger&&(y=" disabled."),u.innerHTML+=y,g.init(),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then((e=>{MediaRecorder?(p=new o(e,s,g.info),g.recorder=p,p.ondataavailable((e=>{b.push(e.data)})),p.onstart((()=>{})),p.onstop((()=>{const e=new Blob(b);b=[],p.enabled=!1,e.size>=1e3&&g.socket.emit("recognize",e)})),r.listening(e,d,c,(()=>{p.noiseDetected=!0}),(()=>{p.noiseDetected=!1,p.enabled&&!p.hotwordTriggered&&(p.stop(),p.enabled=!1,p.hotwordTriggered=!1,p.countSilenceAfterTalk=0)})),g.socket.on("enable-record",(()=>{p.hotwordTriggered=!0,p.start(),setTimeout((()=>{p.hotwordTriggered=!1}),c),p.enabled=!0}))):console.error("MediaRecorder is not supported on your browser.")})).catch((e=>{console.error("MediaDevices.getUserMedia() threw the following error:",e)})):console.error("MediaDevices.getUserMedia() is not supported on your browser."),e.stop(),document.addEventListener("keydown",(e=>{((e,A)=>{e.altKey&&"t"===e.key&&A()})(e,(()=>{!1===p.enabled?(A.value="",p.start(),p.enabled=!0):(p.stop(),p.enabled=!1)}))})),A.addEventListener("keydown",(e=>{((e,A)=>{const t=e.which||e.keyCode;null===localStorage.getItem("history")||38!==t&&40!==t||(a=JSON.parse(localStorage.getItem("history")).reverse()),13===t?A.send("query")&&(a=JSON.parse(localStorage.getItem("history")).reverse(),n=-1):null!==localStorage.getItem("history")&&(38===t&&n<a.length-1?(n+=1,A.input=a[n]):40===t&&n-1>=0?(n-=1,A.input=a[n]):40===t&&n-1<0&&(A.input="",n=-1))})(e,g)})),s.addEventListener("click",(e=>{e.preventDefault(),!1===p.enabled?(p.start(),p.enabled=!0):(p.stop(),p.enabled=!1)}))}}))}));
